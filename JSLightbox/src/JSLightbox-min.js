var JSLightBox;JSLightBox=function(t){var e=this;this.type=t.type||"image",this.main=null,this.background=null,this.wrapper=null,this.content=null,this.mainWindow=null,this.paddingTop=this.paddingTop||50,this.paddingBottom=this.paddingBottom||50,this.bindingClass=t.bindingClass||"JSLightBox",this.url=t.url||null,this.method=t.method||"get",this.width=t.width||"90%",this.height=t.height||"auto",this.onClose=t.onClose||null,this.onComplete=t.height||null,this.onFailure=t.onFailure||null,this.on404=t.on404||null,this.async=t.async||!0,this.data=t.data||null,this.autoAdjust=t.autoAdjust||!0,this.initialize=function(){switch(this.create(),this.type){case"ajax":this.loadAjax();break;default:var t=document.getElementsByTagName("A");if(t.length>0)for(var e=0;e<t.length;e++)-1!==t[e].className.indexOf(this.bindingClass)&&(t[e].onclick=function(t){var e=t||window.event;e.preventDefault?e.preventDefault():(e.returnValue=!1,e.cancelBubble=!0),this.showBox(this,this.type)})}},this.create=function(){this.main=document.createElement("div"),this.main.className="JSLightBox_main",this.main.id="JSLightBox_main",this.background=document.createElement("div"),this.background.className="JSLightBox_overlay",this.background.id="JSLightBox_overlay",this.background.onclick=function(){e.closeBox()},this.wrapper=document.createElement("div"),this.wrapper.className="JSLightBox_wrapper",this.wrapper.id="JSLightBox_wrapper",this.wrapper.onclick=function(t){var n=t||window.event;n.preventDefault?n.preventDefault():(n.returnValue=!1,n.cancelBubble=!0),n.target.id===e.wrapper.id&&e.closeBox()},this.mainWindow=document.createElement("div"),this.mainWindow.className="JSLightBox_window",this.mainWindow.id="JSLightBox_window",this.mainWindow.onclick=function(t){var e=t||window.event;e.preventDefault?e.preventDefault():(e.returnValue=!1,e.cancelBubble=!0)},this.content=document.createElement("div"),this.content.className="JSLightBox_content",this.content.id="JSLightBox_content",this.content.onclick=function(t){var e=t||window.event;e.preventDefault?e.preventDefault():(e.returnValue=!1,e.cancelBubble=!0)},this.closeButton=document.createElement("span"),this.closeButton.className="closeButton",this.closeButton.onclick=function(){e.closeBox()},this.main.appendChild(this.background),this.main.appendChild(this.wrapper),this.wrapper.appendChild(this.mainWindow),this.mainWindow.appendChild(this.closeButton),this.mainWindow.appendChild(this.content)},this.showBox=function(){window.document.body.appendChild(this.main),this.autoAdjust&&(this.adjustWindowHeight(),window.onresize=function(t){e.adjustWindowHeight()})},this.closeBox=function(){el=document.getElementById("JSLightBox_main"),elWindow=document.getElementById("JSLightBox_window"),elOverlay=document.getElementById("JSLightBox_overlay"),el&&(elWindow.className=elWindow.className+" JSLightBox_closeWindow",elOverlay.style.opacity="0",setTimeout(function(){el.parentNode&&el.parentNode.removeChild(el)},1e3),this.onClose&&this.onClose())},this.createImageBox=function(t){if("A"===t.tagName){var e=document.createElement("img");return e.src=t.href,e.className="contentImage",e}},this.loadAjax=function(){if(dataString="",postMethod=this.getMethod,httpResponse="Content not found",mainObject=this,""!==this.url){var t=new XMLHttpRequest||new ActiveXObject("Microsoft.XMLHTTP");!0===this.async&&(t.onreadystatechange=function(){if(4===this.readyState)switch(httpResponse=t.responseText,this.status){case 200:mainObject.ajaxComplete(httpResponse);break;case 404:mainObject.ajaxNotFound(httpResponse);break;default:mainObject.ajaxError(httpResponse)}}),"post"===postMethod?(t.open("POST",this.url,this.async),t.setRequestHeader("Content-type","application/x-www-form-urlencoded")):t.open("GET",this.url,this.async),t.send(dataString),!1===this.async&&mainObject.ajaxComplete()}else mainObject.ajaxNotFound("Page not found")},this.getMethod=function(){return postMethod=this.method||"",""!==postMethod?"post"!==postMethod.toLowerCase()&&(postMethod="get"):postMethod="get",postMethod},this.browserSizes=function(){return{x:window.outerWidth||document.documentElement.clientWidth||document.body.clientWidth,y:window.outerHeight||document.documentElement.clientHeight||document.body.clientHeight,ix:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,ih:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},this.contentSizes=function(){return{x:this.content.innerWidth||this.content.clientWidth,y:this.content.innerHeight||this.content.clientHeight}},this.adjustWindowHeight=function(){var t=this.browserSizes(),e=this.contentSizes(),n=t.y-this.paddingBottom;e.y+this.paddingBottom<n&&(n=e.y),difference=(t.ih-n)/2,this.mainWindow.style.top=difference,this.mainWindow.style.width=this.width,this.mainWindow.style.height=n+"px"},this.getPostString=function(){this.data&&(data=this.data)},this.ajaxComplete=function(t){this.content.innerHTML=t,this.onComplete&&this.onComplete(t),this.showBox()},this.ajaxError=function(t){this.content.innerHTML=t,this.onFailure&&this.onFailure(t),this.showBox()},this.ajaxNotFound=function(t){t="Page Not Found",this.content.innerHTML=t,this.on404&&this.on404(t),this.showBox()}};